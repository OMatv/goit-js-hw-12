{"version":3,"file":"commonHelpers.js","sources":["../src/js/render-functions.js","../src/main.js"],"sourcesContent":["export function clearGallery() {\n  const galleryElement = document.querySelector('.gallery');\n  galleryElement.innerHTML = '';\n}\n\nexport function renderImages(images) {\n  const galleryElement = document.querySelector('.gallery');\n  let imageHTML = '';\n\n  images.forEach(image => {\n    imageHTML += `\n      <a class=\"gallery__item\" href=\"${image.largeImageURL}\" target=\"_blank\">\n        <figure class=\"gallery__figure\">\n          <img class=\"gallery__img\" src=\"${image.webformatURL}\" alt=\"${image.tags}\" loading=\"lazy\">\n          <figcaption class=\"gallery__figcaption\">\n            <div class=\"gallery__caption\">Likes: ${image.likes}</div>\n            <div class=\"gallery__caption\">Views: ${image.views}</div>\n            <div class=\"gallery__caption\">Comments: ${image.comments}</div>\n            <div class=\"gallery__caption\">Downloads: ${image.downloads}</div>\n          </figcaption>\n        </figure>\n      </a>`;\n  });\n\n  galleryElement.innerHTML += imageHTML;\n}\n","import axios from 'axios';\nimport SimpleLightbox from 'simplelightbox';\nimport 'simplelightbox/dist/simple-lightbox.min.css';\nimport iziToast from 'izitoast';\nimport 'izitoast/dist/css/iziToast.min.css';\nimport { renderImages, clearGallery } from './js/render-functions.js';\n\ndocument.addEventListener('DOMContentLoaded', () => {\n  const form = document.querySelector('#search-form');\n  const input = document.querySelector('#search-input');\n  const gallery = document.querySelector('.gallery');\n  const loader = document.querySelector('.loader');\n  const loadMoreBtn = document.querySelector('#load-more-btn');\n\n  const lightbox = new SimpleLightbox('.gallery a');\n  let currentPage = 1;\n  let currentQuery = '';\n  let cardHeight = 0;\n\n  async function loadImages(query, page) {\n    try {\n      loader.style.display = 'block';\n      const response = await axios.get('https://pixabay.com/api/', {\n        params: {\n          key: '43289261-b2f679df5fe28faf218337d96',\n          q: query,\n          image_type: 'photo',\n          orientation: 'horizontal',\n          captions: true,\n          page: page,\n          per_page: 15,\n        },\n      });\n\n      return response.data;\n    } catch (error) {\n      throw new Error('Failed to fetch images from Pixabay API');\n    } finally {\n      loader.style.display = 'none';\n    }\n  }\n\n  async function handleSearchSubmit(event) {\n    event.preventDefault();\n    const searchTerm = input.value.trim();\n    if (!searchTerm) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Please enter a search term',\n        position: 'topRight',\n      });\n      return;\n    }\n\n    clearGallery();\n    currentQuery = searchTerm;\n    currentPage = 1;\n    await fetchAndRenderImages(currentQuery, currentPage);\n    gallery.style.display = 'flex';\n    loadMoreBtn.style.display = 'block';\n    document.documentElement.style.scrollBehavior = 'smooth';\n  }\n\n  async function fetchAndRenderImages(query, page) {\n    try {\n      const { hits, totalHits } = await loadImages(query, page);\n      renderImages(hits);\n      lightbox.refresh();\n      if (page === 1) {\n        const card = document.querySelector('.gallery__item');\n        cardHeight = card.getBoundingClientRect().height;\n      }\n      if (hits.length === 0 || page * 15 >= totalHits) {\n        loadMoreBtn.style.display = 'none';\n        iziToast.info({\n          title: 'Info',\n          message: \"We're sorry, but you've reached the end of search results.\",\n          position: 'topRight',\n        });\n      }\n    } catch (error) {\n      iziToast.error({\n        title: 'Error',\n        message: 'Failed to fetch images. Please try again later.',\n        position: 'topRight',\n      });\n    }\n  }\n\n  async function loadMoreImages() {\n    currentPage++;\n    const scrollDistance = cardHeight * 2;\n    await fetchAndRenderImages(currentQuery, currentPage);\n    window.scrollBy({ top: scrollDistance, behavior: 'smooth' });\n  }\n\n  form.addEventListener('submit', handleSearchSubmit);\n  loadMoreBtn.addEventListener('click', loadMoreImages);\n});\n"],"names":["clearGallery","galleryElement","renderImages","images","imageHTML","image","form","input","gallery","loader","loadMoreBtn","lightbox","SimpleLightbox","currentPage","currentQuery","cardHeight","loadImages","query","page","axios","handleSearchSubmit","event","searchTerm","iziToast","fetchAndRenderImages","hits","totalHits","loadMoreImages","scrollDistance"],"mappings":"owBAAO,SAASA,GAAe,CAC7B,MAAMC,EAAiB,SAAS,cAAc,UAAU,EACxDA,EAAe,UAAY,EAC7B,CAEO,SAASC,EAAaC,EAAQ,CACnC,MAAMF,EAAiB,SAAS,cAAc,UAAU,EACxD,IAAIG,EAAY,GAEhBD,EAAO,QAAQE,GAAS,CACtBD,GAAa;AAAA,uCACsBC,EAAM,aAAa;AAAA;AAAA,2CAEfA,EAAM,YAAY,UAAUA,EAAM,IAAI;AAAA;AAAA,mDAE9BA,EAAM,KAAK;AAAA,mDACXA,EAAM,KAAK;AAAA,sDACRA,EAAM,QAAQ;AAAA,uDACbA,EAAM,SAAS;AAAA;AAAA;AAAA,WAItE,CAAG,EAEDJ,EAAe,WAAaG,CAC9B,CClBA,SAAS,iBAAiB,mBAAoB,IAAM,CAClD,MAAME,EAAO,SAAS,cAAc,cAAc,EAC5CC,EAAQ,SAAS,cAAc,eAAe,EAC9CC,EAAU,SAAS,cAAc,UAAU,EAC3CC,EAAS,SAAS,cAAc,SAAS,EACzCC,EAAc,SAAS,cAAc,gBAAgB,EAErDC,EAAW,IAAIC,EAAe,YAAY,EAChD,IAAIC,EAAc,EACdC,EAAe,GACfC,EAAa,EAEjB,eAAeC,EAAWC,EAAOC,EAAM,CACrC,GAAI,CACF,OAAAT,EAAO,MAAM,QAAU,SACN,MAAMU,EAAM,IAAI,2BAA4B,CAC3D,OAAQ,CACN,IAAK,qCACL,EAAGF,EACH,WAAY,QACZ,YAAa,aACb,SAAU,GACV,KAAMC,EACN,SAAU,EACX,CACT,CAAO,GAEe,IACjB,MAAe,CACd,MAAM,IAAI,MAAM,yCAAyC,CAC/D,QAAc,CACRT,EAAO,MAAM,QAAU,MACxB,CACF,CAED,eAAeW,EAAmBC,EAAO,CACvCA,EAAM,eAAc,EACpB,MAAMC,EAAaf,EAAM,MAAM,KAAI,EACnC,GAAI,CAACe,EAAY,CACfC,EAAS,MAAM,CACb,MAAO,QACP,QAAS,6BACT,SAAU,UAClB,CAAO,EACD,MACD,CAEDvB,IACAc,EAAeQ,EACfT,EAAc,EACd,MAAMW,EAAqBV,EAAcD,CAAW,EACpDL,EAAQ,MAAM,QAAU,OACxBE,EAAY,MAAM,QAAU,QAC5B,SAAS,gBAAgB,MAAM,eAAiB,QACjD,CAED,eAAec,EAAqBP,EAAOC,EAAM,CAC/C,GAAI,CACF,KAAM,CAAE,KAAAO,EAAM,UAAAC,CAAW,EAAG,MAAMV,EAAWC,EAAOC,CAAI,EACxDhB,EAAauB,CAAI,EACjBd,EAAS,QAAO,EACZO,IAAS,IAEXH,EADa,SAAS,cAAc,gBAAgB,EAClC,sBAAuB,EAAC,SAExCU,EAAK,SAAW,GAAKP,EAAO,IAAMQ,KACpChB,EAAY,MAAM,QAAU,OAC5Ba,EAAS,KAAK,CACZ,MAAO,OACP,QAAS,6DACT,SAAU,UACpB,CAAS,EAEJ,MAAe,CACdA,EAAS,MAAM,CACb,MAAO,QACP,QAAS,kDACT,SAAU,UAClB,CAAO,CACF,CACF,CAED,eAAeI,GAAiB,CAC9Bd,IACA,MAAMe,EAAiBb,EAAa,EACpC,MAAMS,EAAqBV,EAAcD,CAAW,EACpD,OAAO,SAAS,CAAE,IAAKe,EAAgB,SAAU,QAAQ,CAAE,CAC5D,CAEDtB,EAAK,iBAAiB,SAAUc,CAAkB,EAClDV,EAAY,iBAAiB,QAASiB,CAAc,CACtD,CAAC"}